(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(4229)}])},4229:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return w},default:function(){return h}});var s=r(4924),t=r(6042),a=r(6122),o=r(5893),i=r(7294),u=r(6486),d=r.n(u),l=r(8966),c=r.n(l),m=function(e){var n={},r={};e.username=(0,u.isEmpty)(e.username)?"":e.username,e.password=(0,u.isEmpty)(e.password)?"":e.password;var s=function(s,t,a,o){var i=arguments.length>5?arguments[5]:void 0;c().isLength(e[s],{min:a,max:o})||(n[s]="".concat(t," must be ").concat(a," to ").concat(o," characters")),i&&c().isEmpty(e[s])&&(n[s]="".concat(t," is required")),n[s]||(r[s]=c().trim(e[s]),r[s]=c().escape(r[s]))};return s("username","Username",2,35,"string",!0),s("password","Password",2,35,"string",!0),{sanitizedData:r,errors:n,isValid:(0,u.isEmpty)(n)}},g=r(196),p=r(8301),v=r(4387),f=r(1163),w=!0,h=function(e){var n=e.data,r=(0,f.useRouter)(),l=(0,i.useState)({username:"",password:""}),c=l[0],w=l[1],h=(0,i.useState)(null),x=h[0],b=h[1],y=(0,i.useState)(!1),_=y[0],N=y[1],j=function(e){e.errors.password&&b(e.errors.password),e.errors.username&&b(e.errors.username)},E=function(e){w((0,a.Z)((0,t.Z)({},c),(0,s.Z)({},e.target.name,e.target.value)))},S=c.username,k=c.password;return(0,o.jsx)(v.Z,{data:n,children:(0,o.jsxs)("div",{className:"login-form bg-gray-100 rounded-lg p-8 md:ml-auto mt-10 md:mt-12 w-5/12 m-auto",children:[(0,o.jsx)("h4",{className:"text-gray-900 text-lg font-medium title-font mb-5 block",children:"Login"}),!(0,u.isEmpty)(x)&&(0,o.jsx)("div",{className:"text-red-600",dangerouslySetInnerHTML:{__html:(0,p.o)(x)}}),(0,o.jsxs)("form",{onSubmit:function(e){var n;e.preventDefault(),b(null);var s,t,a,o,i,u,l=null!==(n=null===r||void 0===r?void 0:r.query)&&void 0!==n?n:{},p=l.postType,v=l.previewPostId,f=m({username:null!==(s=null===c||void 0===c?void 0:c.username)&&void 0!==s?s:"",password:null!==(t=null===c||void 0===c?void 0:c.password)&&void 0!==t?t:""});if(f.isValid)return N(!0),(0,g.Z)({data:{username:null!==(i=null===f||void 0===f||null===(a=f.sanitizedData)||void 0===a?void 0:a.username)&&void 0!==i?i:"",password:null!==(u=null===f||void 0===f||null===(o=f.sanitizedData)||void 0===o?void 0:o.password)&&void 0!==u?u:""},method:"post",url:"/api/login"}).then((function(e){var n,s;N(!1),console.log("DATA",e);var t=(null!==(s=null===e||void 0===e?void 0:e.data)&&void 0!==s?s:{}).success;if(console.log(t),t&&p&&v){var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(d().isEmpty(e)||d().isEmpty(n))return"";switch(e){case"post":return"/blog/preview/".concat(n,"/");case"page":return"/page/preview/".concat(n,"/");default:return"/"}}(p,v);r.push(a)}else b("Invalid Credentials");return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.success})).catch((function(){return N(!1),!1}));j(f)},className:"mb-4",children:[(0,o.jsxs)("label",{className:"leading-7 text-sm text-gray-600",children:["Username:",(0,o.jsx)("input",{type:"text",className:"w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",name:"username",value:S,onChange:E})]}),(0,o.jsx)("br",{}),(0,o.jsxs)("label",{className:"leading-7 text-sm text-gray-600",children:["Password:",(0,o.jsx)("input",{type:"password",className:"mb-8 w-full bg-white rounded border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out",name:"password",value:k,onChange:E})]}),(0,o.jsx)("button",{className:"text-white bg-indigo-500 border-0 py-2 px-8 focus:outline-none hover:bg-indigo-600 rounded text-lg",type:"submit",children:"Login"}),_?(0,o.jsx)("p",{children:"Loading..."}):null]})]})})}}},function(e){e.O(0,[662,365,529,341,387,774,888,179],(function(){return n=6429,e(e.s=n);var n}));var n=e.O();_N_E=n}]);